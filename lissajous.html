<!DOCTYPE html>
<html>
	<head>
		<style>
      canvas {
        margin: 40px 0px 0px 40px;
        border: 1px solid;
      }
    </style>
    <script src="colors.js"></script>
    <script src="canvas.js"></script>
	</head>
	<body>
    <canvas id="canvas" height="500" width="500"></canvas>
    <script>
      var canvas = new LJCanvas('#canvas');
        
      var scaledRatio = 5;

      var AMPLITUDE = (canvas.height() / scaledRatio) < (canvas.width() / scaledRatio) ? canvas.height() / scaledRatio : canvas.width() / scaledRatio;

      var SLASHED_ZERO = Math.PI / 180;
      var SLASHED_ZERO_B = Math.PI / 2
      var PI_2 = Math.PI * 2;

      var a = 5;
      var b = 6;


      function Damper() {
        // Euler's constant
        var E = Math.E;

        // reduce curve over time;
        var damping = 0.004;

        this.getDamping = function() {
          return damping;
        };

        this.setDamping = function(num) {
          damping = num;
        };

        this.dampen = function(value, t) {
          t = t || 0;
          value = value || 0;

          return Math.pow(E, (-this.getDamping * t)) * value;
        };
      }

      var damper = new Damper();
      var lissajous = function(a,b,t, amplitude) {
        var vector = {
          x: null,
          y: null
        };
        // adding or multiplying by pi/2 spiros
        // multiplying and diving these outputs changes the height and width of the curve
        vector.x = AMPLITUDE * Math.sin(a * t * SLASHED_ZERO);
        vector.y = AMPLITUDE * Math.sin(b * t * SLASHED_ZERO);

        return vector;
      };


      // control line thickness. lower is thinner
      var radius =1;
      
      var t = 0;
      
      var vector = {x: 0, y: 0};
      var lastVector = null;

      var draw = function() {
        t += 2;
        
        lastVector = vector;
        vector = lissajous(a,b,t);

        canvas.drawArc(lastVector, vector, radius);

        if (t <= 360) {
          window.requestAnimationFrame(draw);
        }
      };

      window.requestAnimationFrame(draw);
      
      
      /* we need 
        
        Start X
        Start Y
        A - x curve number
        B - y curve number
        amplitude - variable
        radius - variable
        damping - variable, switchable on both x and y
        time - speed (or how clear the line is)
        start degree - how chunky the line is

        !also! store the last vector to draw the line?
      */
      // for (var t = 0; t <= 360; t += 0.1) {
      //   var vector = lissajous(a,b,t);
      //   drawArc(vector);
      // }

     </script>
	</body>
</html>